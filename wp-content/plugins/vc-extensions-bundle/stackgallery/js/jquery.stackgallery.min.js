jQuery(document).ready(function(t){"use strict";var a=["1","2","3","4","5","6","7","8","9","10"],e=a.length;t(".cq-stackgallery").each(function(i){function n(){g&&(clearInterval(v),v=setInterval(function(){o(null)},m),u=!0,l.data("slideshowint",v))}function r(t){try{l.tooltipster("destroy")}catch(t){}var a=t.attr("title");""!=a&&"on"!=p&&(l.tooltipster({content:a,delay:200,animation:"grow",position:"top",offsetY:.5*-(l.height()-h),delay:50,theme:"tooltipster-shadow"}),l.tooltipster("show"))}function o(a){g&&clearInterval(l.data("slideshowint"));var e=l.find("img.stackgallery-item").last(),i=l.find("img.stackgallery-item").first(),o=e.prev("img.stackgallery-item");r(o);var s=1;a&&(s=a.pageX-l.offset().left>.5*l.width()?1:-1);var h=e.data("deg");y||(y=!0,o.transition({rotate:0,x:0},300,"linear"),e.transition({rotate:h,x:s*d*1.2},400,c,function(){t(this).transition({x:0,rotate:h},300,f,function(){t(this).insertBefore(i),t(this).removeClass("back"),y=!1,n()}).addClass("back")}))}function s(a){g&&clearInterval(l.data("slideshowint")),a&&(a.stopPropagation(),a.preventDefault());var e=l.find("img.stackgallery-item").last(),i=l.find("img.stackgallery-item").first(),o=e.prev("img.stackgallery-item"),s=-1,h=e.data("deg");y||(y=!0,o.transition({rotate:h,x:0},300,"linear"),i.transition({rotate:h,x:s*d*1.2},300,c,function(){t(this).addClass("front").transition({x:0,rotate:0},300,f,function(){t(this).insertAfter(e),t(this).removeClass("front"),r(i),y=!1,n()})}))}var l=t(this),d=t(this).data("width"),h=t(this).data("height"),c=t(this).data("easein"),f=t(this).data("easeout"),g="yes"==t(this).data("slideshow"),m=t(this).data("slideshowdelay")||5e3,p=t(this).data("notooltip")||"off";t(this).css({height:l.data("containerheight")||h+80}),t(this).find(".stackgallery-next").parent("a").on("click",function(t){o(),t.stopPropagation(),t.preventDefault()});var v,u=!1;n(),t(this).find(".stackgallery-prev").parent("a").on("click",s),t(this).find("img.stackgallery-item").each(function(i){var n=2*Math.floor(2*Math.random())-1,r=(n*a[Math.floor(Math.random()*e)]).toString();t(this).css({width:d,height:h,top:"50%",left:"50%",opacity:"1","margin-top":.5*-h,"margin-left":.5*-d,"-moz-transform":"rotate("+r+"deg)","-ms-transform":"rotate("+r+"deg)","-webkit-transform":"rotate("+r+"deg)",transform:"rotate("+r+"deg)"}).data("deg",r)});var y=!1,k=t(this).find("img.stackgallery-item").last();k.transition({rotate:0,x:0},300,"linear"),r(k),t(this).on("click",function(t){var a=t.pageX-l.offset().left>.5*l.width()?1:-1;a>0?o(t):s(t)}).on("mouseover",function(t){g&&clearInterval(l.data("slideshowint")),u=!1}).on("mouseleave",function(t){n()});var w=h/d;t(window).on("resize",function(a){l.width()<=320?(l.find(".stackgallery-next").parent("a").parent("div").hide(),l.find(".stackgallery-prev").parent("a").parent("div").hide()):(l.find(".stackgallery-next").parent("a").parent("div").show(),l.find(".stackgallery-prev").parent("a").parent("div").show()),l.find("img.stackgallery-item").each(function(a){var e=t(this).width(),i=e*w;t(this).css({height:i,"margin-left":.5*-e,"margin-top":.5*-i})})}),t(window).trigger("resize")})});